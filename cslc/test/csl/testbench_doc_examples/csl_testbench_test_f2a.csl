// 6 Oct 2007
// andreim
// Testbench test 
// formal to actual connection of DUTs

//6 Oct 2007
//andreim
//Testbench test (2 tb)


csl_unit DUT_a{
   csl_port clk ( input );
   csl_port stim_in_a0 ( input );
   csl_port exp_out_a0 ( output );
   DUT_a(){
     clk.set_attr ( clock );
   }
};
csl_vector stim_vec_a{
   stim_vec_a(){
      set_unit_name ( DUT_a );
      set_direction   ( input );
   }
};
csl_vector exp_vec_a{
   exp_vec_a(){
      set_unit_name ( DUT_a );
      set_direction   ( output );
   }
};

csl_unit DUT_b{
   csl_port clk ( input );
   csl_port stim_in_b0 ( input );
   csl_port exp_out_b0 ( output );
   DUT_b(){
     clk.set_attr ( clock );
   }
};
csl_vector stim_vec_b{
   stim_vec_b(){
      set_unit_name ( DUT_b );
      set_direction   ( input );
   }
};
csl_vector exp_vec_b{
   exp_vec_b(){
      set_unit_name ( DUT_b );
      set_direction   ( output );
   }
};

csl_unit DUT_c{
   csl_port clk ( input );
   csl_port stim_in_c1 ( input );
   csl_port f2a_port   ( output );
   DUT_c(){
     clk.set_attr ( clock);
   }
};

csl_vector stim_vec_c{
   stim_vec_c(){
      set_unit_name ( DUT_c );
      set_direction   ( input );
   }
};
csl_vector exp_vec_c{
   exp_vec_c(){
      set_unit_name ( DUT_c );
      set_direction   ( output );
   }
};
//csl_unit tb_top{
// DUT_a DUT_a0;
// DUT_b DUT_b0;
// DUT_c DUT_c0;
// tb_top(){
// }
//};
csl_unit a {
  csl_port p1(input);
  //csl_port p2(input,8);
  csl_port p3(output);
  //csl_port p4(output,8);
  csl_port p5(input);
  DUT_c DUT_c_(.clk(p5),.stim_in_c1(p1),.f2a_port(p3));
  DUT_a DUT_a_(.clk(p5),.stim_in_a0(p1),.exp_out_a0(p3));
  DUT_b DUT_b_(.clk(p5),.stim_in_b0(p1),.exp_out_b0(p3));
  a (){}
};


csl_testbench tb{
  csl_signal clk(reg);
   csl_signal f2a_sgn;

   DUT_c DUT_c_(.clk(clk),.f2a_port(f2a_sgn));
   DUT_a DUT_a_(.clk(clk),.stim_in_a0(f2a_sgn));
   DUT_b DUT_b_(.clk(clk),.stim_in_b0(f2a_sgn));

   tb(){
         clk.set_attr ( clock );
         add_logic(clock, clk,2,ns);
      }
};

